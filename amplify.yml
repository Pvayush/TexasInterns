version: 1
applications:
  # Backend Application
  - appRoot: backend
    backend:
      phases:
        preBuild:
          commands:
            - npm install  # Install backend dependencies
        build:
          commands:
            - npm start  # Start the backend server
    artifacts:
      baseDirectory: .
      files:
        - '**/*'
    cache:
      paths:
        - node_modules/**/*  # Cache backend node_modules

  # Frontend Application
  - appRoot: frontend
    frontend:
      phases:
        preBuild:
          commands:
            - npm install  # Install frontend dependencies
        build:
          commands:
            - npm run build  # Build the frontend React app
    artifacts:
      baseDirectory: build  # Output directory for the built files
      files:
        - '**/*'
    cache:
      paths:
        - node_modules/**/*  # Cache frontend node_modules
