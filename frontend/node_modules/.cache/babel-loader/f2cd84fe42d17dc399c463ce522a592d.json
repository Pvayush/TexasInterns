{"ast":null,"code":"import _defineProperty from\"C:/Users/pvayu/OneDrive/Documents/Code/TexasInterns/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"C:/Users/pvayu/OneDrive/Documents/Code/TexasInterns/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/pvayu/OneDrive/Documents/Code/TexasInterns/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _extraReducers;import _regeneratorRuntime from\"C:\\\\Users\\\\pvayu\\\\OneDrive\\\\Documents\\\\Code\\\\TexasInterns\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{createSlice,createAsyncThunk}from'@reduxjs/toolkit';import{toast}from'react-toastify';import{getAllJobsThunk}from'./allJobsThunk';import customFetch from'../../utils/axios';// Make sure this path is correct and `axios` is set up properly.\nvar initialFiltersState={search:'',searchStatus:'all',searchType:'all',sort:'latest',sortOptions:['latest','oldest','a-z','z-a']};var initialState=_objectSpread({isLoading:true,jobs:[],totalJobs:0,numOfPages:1,page:1,stats:{},monthlyApplications:[]},initialFiltersState);// Thunks for fetching jobs\nexport var getAllJobs=createAsyncThunk('allJobs/getJobs',getAllJobsThunk);// Thunk for showing statistics with demo user check\nexport var showStats=createAsyncThunk('allJobs/showStats',/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_,thunkAPI){var user,resp;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=thunkAPI.getState().user.user;// Check if the current user is a demo user\nif(!(user.email==='demoUser@test.com')){_context.next=3;break;}return _context.abrupt(\"return\",{defaultStats:{pending:2,interview:3,declined:1},monthlyApplications:[{date:'2024-01',count:2},{date:'2024-02',count:3},{date:'2024-03',count:1}]});case 3:_context.prev=3;_context.next=6;return customFetch.get('/jobs/stats');case 6:resp=_context.sent;return _context.abrupt(\"return\",resp.data);case 10:_context.prev=10;_context.t0=_context[\"catch\"](3);return _context.abrupt(\"return\",thunkAPI.rejectWithValue('There was an error fetching stats'));case 13:case\"end\":return _context.stop();}}},_callee,null,[[3,10]]);}));return function(_x,_x2){return _ref.apply(this,arguments);};}());var allJobsSlice=createSlice({name:'allJobs',initialState:initialState,reducers:{showLoading:function showLoading(state){state.isLoading=true;},hideLoading:function hideLoading(state){state.isLoading=false;},handleChange:function handleChange(state,_ref2){var _ref2$payload=_ref2.payload,name=_ref2$payload.name,value=_ref2$payload.value;state.page=1;// Reset to the first page when filters change\nstate[name]=value;},clearFilters:function clearFilters(state){return _objectSpread(_objectSpread({},state),initialFiltersState);},changePage:function changePage(state,_ref3){var payload=_ref3.payload;state.page=payload;},clearAllJobsState:function clearAllJobsState(state){return initialState;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,getAllJobs.pending,function(state){state.isLoading=true;}),_defineProperty(_extraReducers,getAllJobs.fulfilled,function(state,_ref4){var payload=_ref4.payload;state.isLoading=false;state.jobs=payload.jobs;// Update jobs list\nstate.numOfPages=payload.numOfPages;// Total number of pages\nstate.totalJobs=payload.totalJobs;// Total number of jobs\n}),_defineProperty(_extraReducers,getAllJobs.rejected,function(state,_ref5){var payload=_ref5.payload;state.isLoading=false;toast.error(payload);// Show error message\n}),_defineProperty(_extraReducers,showStats.pending,function(state){state.isLoading=true;}),_defineProperty(_extraReducers,showStats.fulfilled,function(state,_ref6){var payload=_ref6.payload;state.isLoading=false;state.stats=payload.defaultStats;// Update stats\nstate.monthlyApplications=payload.monthlyApplications;// Update monthly applications\n}),_defineProperty(_extraReducers,showStats.rejected,function(state,_ref7){var payload=_ref7.payload;state.isLoading=false;toast.error(payload);// Show error message\n}),_extraReducers)});var _allJobsSlice$actions=allJobsSlice.actions,showLoading=_allJobsSlice$actions.showLoading,hideLoading=_allJobsSlice$actions.hideLoading,handleChange=_allJobsSlice$actions.handleChange,clearFilters=_allJobsSlice$actions.clearFilters,changePage=_allJobsSlice$actions.changePage,clearAllJobsState=_allJobsSlice$actions.clearAllJobsState;export{showLoading,hideLoading,handleChange,clearFilters,changePage,clearAllJobsState};export default allJobsSlice.reducer;","map":{"version":3,"sources":["C:/Users/pvayu/OneDrive/Documents/Code/TexasInterns/frontend/src/features/allJobs/allJobsSlice.js"],"names":["createSlice","createAsyncThunk","toast","getAllJobsThunk","customFetch","initialFiltersState","search","searchStatus","searchType","sort","sortOptions","initialState","isLoading","jobs","totalJobs","numOfPages","page","stats","monthlyApplications","getAllJobs","showStats","_","thunkAPI","user","getState","email","defaultStats","pending","interview","declined","date","count","get","resp","data","rejectWithValue","allJobsSlice","name","reducers","showLoading","state","hideLoading","handleChange","payload","value","clearFilters","changePage","clearAllJobsState","extraReducers","fulfilled","rejected","error","actions","reducer"],"mappings":"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","sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { toast } from 'react-toastify';\nimport { getAllJobsThunk } from './allJobsThunk';\nimport customFetch from '../../utils/axios'; // Make sure this path is correct and `axios` is set up properly.\n\nconst initialFiltersState = {\n  search: '',\n  searchStatus: 'all',\n  searchType: 'all',\n  sort: 'latest',\n  sortOptions: ['latest', 'oldest', 'a-z', 'z-a'],\n};\n\nconst initialState = {\n  isLoading: true,\n  jobs: [],\n  totalJobs: 0,\n  numOfPages: 1,\n  page: 1,\n  stats: {},\n  monthlyApplications: [],\n  ...initialFiltersState,\n};\n\n// Thunks for fetching jobs\nexport const getAllJobs = createAsyncThunk('allJobs/getJobs', getAllJobsThunk);\n\n// Thunk for showing statistics with demo user check\nexport const showStats = createAsyncThunk('allJobs/showStats', async (_, thunkAPI) => {\n  const { user } = thunkAPI.getState().user;\n\n  // Check if the current user is a demo user\n  if (user.email === 'demoUser@test.com') {\n    // Return mock data for the demo user\n    return {\n      defaultStats: {\n        pending: 2,\n        interview: 3,\n        declined: 1,\n      },\n      monthlyApplications: [\n        { date: '2024-01', count: 2 },\n        { date: '2024-02', count: 3 },\n        { date: '2024-03', count: 1 },\n      ],\n    };\n  }\n\n  // Proceed with the API call for regular users\n  try {\n    const resp = await customFetch.get('/jobs/stats');\n    return resp.data;\n  } catch (error) {\n    return thunkAPI.rejectWithValue('There was an error fetching stats');\n  }\n});\n\nconst allJobsSlice = createSlice({\n  name: 'allJobs',\n  initialState,\n  reducers: {\n    showLoading: (state) => {\n      state.isLoading = true;\n    },\n    hideLoading: (state) => {\n      state.isLoading = false;\n    },\n    handleChange: (state, { payload: { name, value } }) => {\n      state.page = 1; // Reset to the first page when filters change\n      state[name] = value;\n    },\n    clearFilters: (state) => {\n      return { ...state, ...initialFiltersState };\n    },\n    changePage: (state, { payload }) => {\n      state.page = payload;\n    },\n    clearAllJobsState: (state) => initialState,\n  },\n  extraReducers: {\n    [getAllJobs.pending]: (state) => {\n      state.isLoading = true;\n    },\n    [getAllJobs.fulfilled]: (state, { payload }) => {\n      state.isLoading = false;\n      state.jobs = payload.jobs; // Update jobs list\n      state.numOfPages = payload.numOfPages; // Total number of pages\n      state.totalJobs = payload.totalJobs; // Total number of jobs\n    },\n    [getAllJobs.rejected]: (state, { payload }) => {\n      state.isLoading = false;\n      toast.error(payload); // Show error message\n    },\n    [showStats.pending]: (state) => {\n      state.isLoading = true;\n    },\n    [showStats.fulfilled]: (state, { payload }) => {\n      state.isLoading = false;\n      state.stats = payload.defaultStats; // Update stats\n      state.monthlyApplications = payload.monthlyApplications; // Update monthly applications\n    },\n    [showStats.rejected]: (state, { payload }) => {\n      state.isLoading = false;\n      toast.error(payload); // Show error message\n    },\n  },\n});\n\nexport const {\n  showLoading,\n  hideLoading,\n  handleChange,\n  clearFilters,\n  changePage,\n  clearAllJobsState,\n} = allJobsSlice.actions;\n\nexport default allJobsSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}